<html>
  <head>
    <title>InnKeeper Admin Panel</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script> 
    <script  type="text/javascript">
      var stompClient;
      function connect() {
          stompClient = Stomp.client("ws://localhost:8081/stomp");
          stompClient.connect({}, function (frame) {
              console.log('Connected: ' + frame);
              fetch('/ws/token')
                .then(response => response.json()) // This converts the response body to a string
                .then(data => {
                  // Use the string data here
                  stompClient.send("/api/connect", {}, JSON.stringify(data));
                  
                });
            stompClient.subscribe('/user/client/command', function (greeting) {
              console.log(JSON.parse(greeting.body));
            });
          });
          
      }

      function disconnect() {
          if (stompClient !== null) {
              stompClient.disconnect();
          }
          setConnected(false);
          console.log("Disconnected");
      }

      function send() {
       stompClient.send("/api/command", {}, JSON.stringify({
        'uri': "/pod/",
        'type': "get",
       }));
      }
    </script>
  </head>
  <body>
    Admin Panel pull from repo.
    <br/>
    <input type="button" onclick="connect();" value="connect"/>
    <br/>
    <input type="button" onclick="send();" value="send"/>
  </body>
</html>
